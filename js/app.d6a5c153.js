(function(t){function e(e){for(var n,s,o=e[0],c=e[1],l=e[2],f=0,h=[];f<o.length;f++)s=o[f],i[s]&&h.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,o=1;o<r.length;o++){var c=r[o];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},i={app:0},a=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/vue-d3-example/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("64a9"),i=r.n(n);i.a},"0484":function(t,e,r){},1742:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("097d");var n=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("h1",[t._v("The Seasonality of Box Office Hits")]),t._m(0),r("div",{staticClass:"area-container"},[t._m(1),r("AreaChart",t._b({},"AreaChart",{movies:t.movies,filtered:t.filtered},!1))],1),t._l(t.histograms,function(e){var n=e.id,i=e.label,a=e.format;return r("div",{key:n,staticClass:"histograms"},[r("Histogram",t._b({},"Histogram",{movies:t.movies,filtered:t.filtered,id:n,format:a,updateFilters:t.updateFilters},!1)),r("div",[r("strong",[t._v(t._s(i))])])],1)})],2)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticClass:"description"},[t._v("\n    In the last decade, most block buster hits have happened around or during the summer and winter holidays.\n    "),r("strong",[t._v("Brush")]),t._v(" the histograms to filter the movies by metascore and/or box office figures, and\n    "),r("strong",[t._v("hover")]),t._v(" the movies to see more details.\n  ")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"area-title"},[r("strong",[t._v("$ over/under median box office")])])}],s=(r("f751"),r("2ef0")),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"areachart"},[r("svg",{attrs:{width:t.width,height:t.height}},[r("transition-group",{attrs:{tag:"g",css:!1},on:{enter:t.enter,leave:t.leave}},t._l(t.arcs,function(e){return r("path",{key:e.id,staticClass:"arc",attrs:{d:e.path,fill:e.fill,stroke:"#fff"},on:{mouseenter:function(){return t.hovered=e},mouseleave:function(){return t.hovered=null}}})})),r("g",{ref:"xAxis",attrs:{transform:"translate(0, "+t.y0+")"}}),r("g",{ref:"yAxis",attrs:{transform:"translate("+t.margin.left+", 0)"}})],1),t.hovered?r("div",{staticClass:"hovered",style:{top:t.hovered.y+20+"px",left:t.hovered.x+"px"}},[r("strong",[t._v("title")]),t._v("\n    "+t._s(t.hovered.data.title)+"\n    "),r("br"),r("strong",[t._v("date")]),t._v("\n    "+t._s(t.formatDate(t.hovered.data.date))+"\n    "),r("br"),r("strong",[t._v("metascore")]),t._v("\n    "+t._s(t.hovered.data.score)+"\n    "),r("br"),r("strong",[t._v("box office")]),t._v("\n    "+t._s(t.formatBox(t.hovered.data.boxOffice))+"\n    "),r("br")]):t._e()])},c=[],l=r("3835"),u=r("5698"),f=r("cffa"),h=1e3,d=300,m={top:0,right:0,bottom:20,left:60},v={name:"areachart",props:["movies","filtered"],data:function(){return{width:h,height:d,margin:m,arcs:[],medianBox:0,y0:0,hovered:null}},created:function(){this.xScale=Object(u["n"])().range([m.left,h-m.right]),this.yScale=Object(u["l"])().range([d-m.bottom,m.top]),this.colorScale=Object(u["m"])(u["i"]),this.areaGen=Object(u["a"])().curve(u["e"]),this.xAxis=Object(u["b"])().scale(this.xScale).tickFormat(this.format),this.yAxis=Object(u["c"])().scale(this.yScale).tickSizeOuter(0).tickFormat(function(t){return"".concat(Object(u["g"])("$")(parseInt(t/1e6)),"M")})},watch:{movies:function(){this.calculateScales(),Object(u["o"])(this.$refs.xAxis).call(this.xAxis),Object(u["o"])(this.$refs.yAxis).call(this.yAxis).select(".domain").remove()},filtered:function(){this.calculateData()}},methods:{calculateScales:function(){var t=this;if(this.movies.length){this.medianBox=Object(u["k"])(this.movies,function(t){return t.boxOffice});var e=Object(u["f"])(this.movies,function(t){return t.score});this.colorScale.domain(e).nice();var r=Object(u["f"])(this.movies,function(t){return t.date}),n=Object(l["a"])(r,2),i=n[0],a=n[1];this.xScale.domain([u["q"].offset(i,-2),u["q"].offset(a,2)]);var s=Object(u["f"])(this.movies,function(e){return e.boxOffice-t.medianBox});this.yScale.domain(s),this.y0=this.yScale(0),this.areaGen.y0(this.y0)}},calculateData:function(){var t=this;this.filtered.length&&(this.arcs=Object(s["chain"])(this.filtered).sortBy(function(e){return-Math.abs(e.boxOffice-t.medianBox)}).map(function(e){var r=t.xScale(e.date),n=t.yScale(e.boxOffice-t.medianBox);return{id:e.id,path:t.areaGen([[t.xScale(u["q"].offset(e.date,-2)),t.y0],[r,n],[t.xScale(u["q"].offset(e.date,2)),t.y0]]),fill:t.colorScale(e.score),data:e,x:r,y:n}}).value())},enter:function(t,e){f["a"].fromTo(t,.25,{scaleY:0,svgOrigin:"0 ".concat(this.y0)},{scaleY:1,onComplete:e})},leave:function(t,e){f["a"].fromTo(t,.25,{scaleY:1},{scaleY:0,svgOrigin:"0 ".concat(this.y0),onComplete:e})},formatDate:function(t){return Object(u["p"])("%b %d, %Y")(t)},formatBox:function(t){return Object(u["g"])("$,.0f")(t)}}},b=v,g=(r("fd09"),r("2877")),p=Object(g["a"])(b,o,c,!1,null,null,null);p.options.__file="AreaChart.vue";var x=p.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"histogram",attrs:{width:t.width,height:t.height}},[r("g",{staticClass:"bars"},t._l(t.bars,function(e,n){var i=e.x,a=e.y,s=e.width,o=e.height,c=e.fill;return r("rect",t._b({key:n},"rect",{x:i,y:a,width:s,height:o,fill:c,stroke:t.stroke},!1))})),r("g",{staticClass:"axis",attrs:{transform:"translate(0, "+(t.height-t.margin.bottom)+")"}},[r("g",{staticClass:"domain"},[r("path",{attrs:{d:t.axis,fill:"none",stroke:"black"}}),t._l(t.ticks,function(e,n){return r("line",{key:n,staticClass:"tick",attrs:{x1:t.scaleX(e),x2:t.scaleX(e),y2:10,stroke:"black"}})})],2),r("g",{staticClass:"ticks",attrs:{transform:"translate(0, 20)"}},[t._l(t.ticks,function(e){return[r("text",{key:e,staticClass:"label",attrs:{x:t.scaleX(e),y:"0","text-anchor":"middle"}},[t._v(t._s(t.format(e)))])]})],2)]),r("g",{ref:"brush"})])},O=[],_=r("ade3"),j=500,k=120,w={top:20,right:20,bottom:20,left:20},S={name:"histogram",props:{movies:{type:Array,default:function(){return[]}},filtered:{type:Array,default:function(){return[]}},id:{type:String},format:{type:Function,default:function(t){return t}},updateFilters:{type:Function,default:function(){}}},data:function(){return{width:j,height:k,margin:w}},computed:{domainX:function(){var t=this;return Object(u["f"])(this.movies,function(e){return e[t.id]})},scaleX:function(){return Object(u["l"])().range([this.margin.left,this.width-this.margin.right]).domain(this.domainX).nice()},ticks:function(){return this.scaleX.ticks()},axis:function(){var t=this.scaleX.range();return"M".concat(t[0]+.5,",6V0.5H").concat(t[t.length-1]+.5,"V6")},maxY:function(){var t=this.histogram(this.movies);return Object(u["j"])(t,function(t){return t.length})},scaleY:function(){return Object(u["l"])().range([this.height-this.margin.bottom,this.margin.top]).domain([0,this.maxY])},domainZ:function(){return Object(u["f"])(this.movies,function(t){return t.score})},scaleZ:function(){return Object(u["m"])(u["i"]).domain(this.domainZ).nice()},histogram:function(){var t=this;return Object(u["h"])().domain(this.domainX).thresholds(this.scaleX.ticks(50)).value(function(e){return e[t.id]})},bars:function(){var t=this;if(this.filtered.length)return this.histogram(this.filtered).map(function(e,r){var n=e.x0,i=e.x1,a=e.length,s=t.scaleX(n),o=t.scaleY(a),c=t.scaleZ(Object(u["k"])(e,function(t){return t.score})||0);return{id:r,x:s,y:o,width:t.scaleX(i)-s,height:k-w.bottom-o,fill:c}})}},watch:{bars:{handler:function(t,e){return console.log(t),new f["b"](this.bars,25,{cycle:{height:function(t){return e?e[t].height:0}}},{cycle:{height:function(e){return t[e].height}}})}}},created:function(){this.brush=Object(u["d"])().extent([[w.left,w.top],[j-w.right,k-w.bottom]]).on("brush",this.brushEnd).on("end",this.brushEnd)},mounted:function(){Object(u["o"])(this.$refs.brush).call(this.brush)},methods:{brushEnd:function(){var t=null;if(event.selection){var e=Object(l["a"])(event.selection,2),r=e[0],n=e[1];t=[this.scaleX.invert(r),this.scaleX.invert(n)]}this.updateFilters(Object(_["a"])({},this.id,t))}}},C=S,A=(r("ac40"),Object(g["a"])(C,y,O,!1,null,"77429380",null));A.options.__file="Histogram.vue";var X=A.exports,$=2008,B={name:"app",components:{Histogram:X,AreaChart:x},data:function(){return{histograms:[{id:"score",label:"metascores"},{id:"boxOffice",label:"box office figures",format:function(t){return"$".concat(parseInt(t/1e6),"M")}}],movies:[],filters:{},filtered:[]}},mounted:function(){var t=this;fetch("./movies.json").then(function(t){return t.json()}).then(function(e){t.movies=Object(s["chain"])(e).map(function(t,e){return Object.assign(t,{id:e,date:new Date(t.date)})}).filter(function(t){return t.boxOffice&&t.year>=$}).value(),t.filtered=t.movies})},computed:{},methods:{updateFilters:function(t){var e=this;this.filters=Object.assign(this.filters,t),this.filtered=Object(s["filter"])(this.movies,function(t){return Object(s["every"])(e.filters,function(e,r){return!e||e[0]<t[r]&&t[r]<e[1]})})}}},F=B,Y=(r("034f"),Object(g["a"])(F,i,a,!1,null,null,null));Y.options.__file="App.vue";var E=Y.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(E)}}).$mount("#app")},"64a9":function(t,e,r){},ac40:function(t,e,r){"use strict";var n=r("0484"),i=r.n(n);i.a},fd09:function(t,e,r){"use strict";var n=r("1742"),i=r.n(n);i.a}});
//# sourceMappingURL=app.d6a5c153.js.map